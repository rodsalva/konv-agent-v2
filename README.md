# MercadoLivre AI Agent Analysis System

A comprehensive multi-agent AI system that simulates different user personas exploring MercadoLivre marketplace, collects their feedback, and generates actionable business insights for department-specific strategic recommendations.

## üéØ What This System Does

This system creates a sophisticated AI-driven market research platform that:

1. **Simulates Real User Behavior**: Deploys 3 distinct AI personas (Tech Enthusiast, Budget Shopper, Gift Buyer) that explore MercadoLivre like real users
2. **Collects Structured Feedback**: Each persona answers consistent questions about their shopping experience
3. **Analyzes Business Impact**: A company analysis agent curates the feedback and translates it into strategic business recommendations
4. **Generates Department-Specific Actions**: Provides concrete action items for 6 different MercadoLivre departments with timelines and KPIs

## üèóÔ∏è System Architecture

### Core Components

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 MercadoLivre AI Analysis System             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Web Interface (Express.js + Beautiful HTML/CSS)           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ Conversations   ‚îÇ  ‚îÇ Departmental Recommendations    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ View            ‚îÇ  ‚îÇ View                            ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Python Agent Orchestra (7 Specialized AI Agents)         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ Context     ‚îÇ ‚îÇ Tech        ‚îÇ ‚îÇ Budget Shopper      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ Agent       ‚îÇ ‚îÇ Enthusiast  ‚îÇ ‚îÇ Agent               ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ Gift Buyer  ‚îÇ ‚îÇ Communication‚îÇ ‚îÇ Company Analysis    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ Agent       ‚îÇ ‚îÇ Agent       ‚îÇ ‚îÇ Agent               ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                           ‚îÇ
‚îÇ  ‚îÇ Oversight   ‚îÇ                                           ‚îÇ
‚îÇ  ‚îÇ Agent       ‚îÇ                                           ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### ü§ñ AI Agent Roles

| Agent | Role | Key Functions |
|-------|------|---------------|
| **MercadoLivre Context Agent** | Marketplace Intelligence | Provides categories, statistics, user behavior patterns |
| **Tech Enthusiast Agent** | Electronics Specialist | Analyzes tech specs, pricing, and product comparisons |
| **Budget Shopper Agent** | Deal Hunter | Focuses on discounts, value propositions, and savings |
| **Gift Buyer Agent** | Gift Experience Expert | Evaluates gift services, wrapping, and discovery tools |
| **Communication Agent** | Orchestrator | Coordinates exploration and synthesizes insights |
| **Company Analysis Agent** | Business Strategist | Curates data and generates departmental recommendations |
| **Oversight Agent** | Quality Validator | Ensures data quality and process completeness |

## üåê Web Interfaces & URLs

### Main Access Points

| Interface | URL | Description |
|-----------|-----|-------------|
| **System Overview** | `http://localhost:3001/` | Main dashboard with all endpoints |
| **Agent Conversations** | `http://localhost:3001/conversations` | Q&A between research agents and personas |
| **Department Strategy** | `http://localhost:3001/departments` | Strategic recommendations by department |

### API Documentation

The system includes comprehensive API documentation using OpenAPI (Swagger) specification. You can access the interactive documentation at the following endpoints:

| Documentation | URL | Description |
|---------------|-----|-------------|
| **Swagger UI** | `/api-docs` | Interactive API documentation |
| **ReDoc UI** | `/api-docs-redoc` | Alternative documentation UI |
| **OpenAPI JSON** | `/api-docs.json` | Raw OpenAPI specification |

For a complete reference of all API endpoints, see the [API Documentation](API.md) or visit the Swagger UI when the server is running.

### Key API Endpoints

| Endpoint | URL | Purpose |
|----------|-----|---------|
| **Health Check** | `GET /health` | System status and information |
| **Conversations JSON** | `GET /api/v1/mercadolivre/conversations` | Raw conversation data |
| **Conversations View** | `GET /api/v1/mercadolivre/conversations/view` | Formatted conversation interface |
| **Departments JSON** | `GET /api/v1/mercadolivre/departments` | Raw departmental recommendations |
| **Departments View** | `GET /api/v1/mercadolivre/departments/view` | Formatted departmental interface |
| **Competitive Benchmarking** | `GET /api/v1/competitors/benchmark` | Competitive analysis data |
| **Sentiment Analysis** | `POST /api/v1/sentiment/analyze` | Analyze sentiment of text |
| **Sentiment Dashboard** | `GET /api/v1/sentiment/dashboard/view` | Sentiment analysis visualization |
| **Agents API** | `GET /api/v1/agents` | List and manage agents |
| **MCP Protocol** | `POST /api/v1/mcp/session/initialize` | Initialize MCP agent session |

## üìÅ Project Structure & Key Files

### Backend (TypeScript/Express.js)
```
src/
‚îú‚îÄ‚îÄ index.ts                          # üî• Main Express server
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îî‚îÄ‚îÄ mercadolivre.routes.ts       # üî• MercadoLivre-specific routes & web interfaces
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ environment.ts               # Environment configuration
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îú‚îÄ‚îÄ correlation.middleware.ts    # Request tracking
‚îÇ   ‚îî‚îÄ‚îÄ [other middleware files]
‚îî‚îÄ‚îÄ [other backend infrastructure]
```

### Python AI Agents
```
python-agents/
‚îú‚îÄ‚îÄ mercadolivre_orchestrator.py     # üî• Main orchestrator (run this!)
‚îú‚îÄ‚îÄ agents.py                        # üî• Core agent framework
‚îú‚îÄ‚îÄ mercadolivre_context_agent.py    # üî• Marketplace intelligence
‚îú‚îÄ‚îÄ tech_enthusiast_agent.py         # üî• Tech persona agent
‚îú‚îÄ‚îÄ budget_shopper_agent.py          # üî• Budget persona agent  
‚îú‚îÄ‚îÄ gift_buyer_agent.py              # üî• Gift persona agent
‚îú‚îÄ‚îÄ company_analysis_agent.py        # üî• Business analysis agent
‚îú‚îÄ‚îÄ communication_agent.py           # üî• Coordination agent
‚îú‚îÄ‚îÄ oversight_agent.py               # Quality validation agent
‚îú‚îÄ‚îÄ requirements.txt                 # Python dependencies
‚îî‚îÄ‚îÄ env/                            # Python virtual environment
```

### Configuration Files
```
‚îú‚îÄ‚îÄ package.json                     # Node.js dependencies & scripts
‚îú‚îÄ‚îÄ tsconfig.json                   # TypeScript configuration
‚îú‚îÄ‚îÄ env.example                     # Environment variables template
‚îî‚îÄ‚îÄ README.md                       # This documentation
```

## üöÄ Installation & Setup

### Prerequisites
- **Node.js** >= 18.0.0
- **Python** 3.9+
- **npm** >= 9.0.0

### Quick Start

1. **Clone and Setup Backend**
   ```bash
   git clone [repository-url]
   cd Konv-agent
   npm install
   ```

2. **Fix TypeScript Configuration for Tests** (if needed)
   ```bash
   # This script creates a separate TypeScript config for tests
   ./scripts/fix-tsconfig.sh
   ```

3. **Setup Python Environment**
   ```bash
   cd python-agents
   python -m venv env
   source env/bin/activate  # On Windows: env\Scripts\activate
   pip install -r requirements.txt
   ```

4. **Start Backend Server**
   ```bash
   # In main directory
   PORT=3001 npm run dev
   ```

5. **Run AI Agent Analysis**
   ```bash
   # In python-agents directory with virtual env activated
   python mercadolivre_orchestrator.py
   ```

### Environment Configuration
The system uses environment variables for configuration. Key variables:

```bash
# Server Configuration
PORT=3001
NODE_ENV=development

# Database (Supabase)
SUPABASE_URL=your_supabase_url
SUPABASE_ANON_KEY=your_key
SUPABASE_SERVICE_ROLE_KEY=your_service_key

# Security
JWT_SECRET=your_jwt_secret_minimum_32_characters
```

## üìä How It Works - The Complete Flow

### 6-Phase Analysis Process

1. **üìä Context Gathering**
   - MercadoLivre Context Agent analyzes marketplace data
   - Provides categories, statistics, user behavior patterns

2. **üéØ Strategy Planning** 
   - Communication Agent creates exploration strategy
   - Formulates specific questions for each persona

3. **üîç Multi-Persona Exploration**
   - 3 persona agents explore MercadoLivre simultaneously
   - Each provides detailed feedback from their perspective

4. **üìã Synthesis**
   - Communication Agent combines all feedback
   - Identifies cross-cutting themes and insights

5. **üè¢ Business Analysis**
   - Company Analysis Agent curates and cleans data
   - Generates departmental recommendations with timelines

6. **‚úÖ Quality Validation**
   - Oversight Agent validates completeness and quality
   - Provides final assessment and confidence scores

### Sample Questions Asked to Each Persona

All personas answer these 4 consistent questions:
1. "What specific features on MercadoLivre do you find most valuable for your shopping needs?"
2. "How would you rate the user experience and navigation compared to other e-commerce platforms?"
3. "What improvements would you suggest to enhance your shopping experience on MercadoLivre?"
4. "How do you typically discover new products and deals on the platform?"

## üéØ Business Output - Departmental Recommendations

The system generates specific recommendations for 6 MercadoLivre departments:

### üéØ Product Department
- **Immediate**: Price history graphs, bundle builder, gift customization
- **Medium-term**: AI recommendation engine, persona landing pages
- **KPIs**: Product discovery conversion, time to purchase, return rate reduction

### ‚öôÔ∏è Engineering Department  
- **Immediate**: Mobile optimization (75% traffic), price comparison algorithms
- **Medium-term**: Enhanced product specs, recommendation algorithms
- **KPIs**: Mobile page speed, search relevance, API response times

### üì¢ Marketing Department
- **Immediate**: Persona-targeted campaigns, PIX discount messaging
- **Medium-term**: Tech review partnerships, cultural gift guides
- **KPIs**: Campaign conversion by persona, email engagement, brand awareness

### üéß Customer Service
- **Immediate**: Tech spec training, gift service protocols
- **Medium-term**: Self-service tools, automated gift tracking
- **KPIs**: First contact resolution, satisfaction scores, response time

### üìä Business Intelligence
- **Immediate**: Persona conversion analysis, price sensitivity modeling
- **Medium-term**: Real-time segmentation, predictive pricing
- **KPIs**: Data accuracy, report speed, insight actionability

### üöö Operations
- **Immediate**: Tech lifecycle management, seasonal gift planning
- **Medium-term**: Gift delivery enhancement, packaging customization
- **KPIs**: Inventory turnover, delivery performance, return efficiency

## üí° Key Features

### üé® Beautiful Web Interfaces
- **Responsive Design**: Works on desktop and mobile
- **Color-Coded Personas**: Each agent has distinct visual styling
- **Interactive Elements**: Hover effects and smooth transitions
- **Professional Styling**: Modern gradients and clean typography

### ü§ñ Intelligent Agent Framework
- **Persona Consistency**: Each agent maintains character throughout
- **Structured Output**: Consistent JSON responses for analysis
- **Cross-Agent Communication**: Agents build on each other's insights
- **Quality Validation**: Built-in oversight and validation

### üìà Business Intelligence
- **Actionable Insights**: Specific, implementable recommendations
- **Timeline Planning**: Clear 3-6 month implementation roadmaps
- **ROI Projections**: 15-25% improvement targets
- **Resource Planning**: Engineering months, design resources, budget estimates

### üìö Comprehensive API Documentation
- **OpenAPI/Swagger**: Interactive API documentation
- **ReDoc UI**: Alternative documentation view
- **Documented Endpoints**: Complete reference for all API endpoints
- **Request/Response Examples**: Clear examples for all operations
- **Schema Definitions**: Detailed data models and type definitions

## üõ†Ô∏è Development & Customization

### Adding New Personas
1. Create new agent file in `python-agents/`
2. Follow the existing agent pattern with `@function_tool` decorators
3. Add agent to `mercadolivre_orchestrator.py`
4. Update the agents framework in `agents.py`

### Modifying Questions
Update the questions array in `src/routes/mercadolivre.routes.ts`:
```typescript
const questions = [
  "Your new question 1?",
  "Your new question 2?",
  // ... up to 4 questions
];
```

### Customizing Departments
Modify the `generateDepartmentalRecommendations()` function in `mercadolivre.routes.ts` to add new departments or change recommendations.

## üìà Expected Business Impact

### ROI Projections
- **15-25% improvement** in key metrics within 6 months
- **R$ 800K - 1.2M** total implementation budget
- **15-20 engineering months** required for full implementation

### Success Metrics
- **Conversion Rate**: +20% for each persona
- **Average Order Value**: +15% through better discovery  
- **Customer Satisfaction**: 4.5+ rating across all personas
- **Retention Rate**: +25% through personalization

## üõ†Ô∏è Available Scripts

### Core Operations
```bash
npm run dev                          # Start development server
npm run build                        # Build for production
npm run start                        # Start production server
npm test                            # Run test suite
```

### MercadoLivre Analysis
```bash
npm run mercadolivre:explore        # Run complete analysis (Python)
# Or manually:
cd python-agents && source env/bin/activate && python mercadolivre_orchestrator.py
```

### Agent Management
```bash
npm run agents:list                 # List available agents
npm run agents:demo                 # Run agent demo
npm run agents:create-company       # Create company agents
```

### Persona Management
```bash
npm run personas:test               # Test persona API functionality
npm run departments:test            # Test department insights functionality
```

### Database Operations
```bash
npm run db:setup                    # Initialize database
npm run db:check                    # Check database connection
npm run db:generate                 # Generate database types
```

## ü§ù Contributing

1. Fork the repository
2. Create feature branch (`git checkout -b feature/amazing-feature`)
3. Make your changes
4. Test both backend and Python agents
5. Submit pull request

## üìÑ License

MIT License - see LICENSE file for details

---

**üéä Ready to explore? Visit `http://localhost:3001/` to see your AI agents in action!**